{"ast":null,"code":"import React,{useState,useEffect,createContext,useContext}from'react';import{createClient}from'@supabase/supabase-js';import{LogOut,Plus,AlertCircle,ShoppingCart,CheckCircle,Clock,AlertTriangle}from'lucide-react';// Configuration Supabase\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const supabaseUrl=process.env.REACT_APP_SUPABASE_URL||'YOUR_SUPABASE_URL';const supabaseKey=process.env.REACT_APP_SUPABASE_ANON_KEY||'YOUR_SUPABASE_ANON_KEY';const supabase=createClient(supabaseUrl,supabaseKey);// Context d'authentification\nconst AuthContext=/*#__PURE__*/createContext();const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};// Provider d'authentification\nconst AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[profile,setProfile]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Récupérer la session initiale\nsupabase.auth.getSession().then(_ref2=>{var _session$user;let{data:{session}}=_ref2;setUser((_session$user=session===null||session===void 0?void 0:session.user)!==null&&_session$user!==void 0?_session$user:null);if(session!==null&&session!==void 0&&session.user){fetchProfile(session.user.id);}else{setLoading(false);}});// Écouter les changements d'authentification\nconst{data:{subscription}}=supabase.auth.onAuthStateChange(async(event,session)=>{var _session$user2;setUser((_session$user2=session===null||session===void 0?void 0:session.user)!==null&&_session$user2!==void 0?_session$user2:null);if(session!==null&&session!==void 0&&session.user){await fetchProfile(session.user.id);}else{setProfile(null);setLoading(false);}});return()=>subscription===null||subscription===void 0?void 0:subscription.unsubscribe();},[]);const fetchProfile=async userId=>{try{const{data,error}=await supabase.from('profiles').select('*').eq('id',userId).single();if(error)throw error;setProfile(data);}catch(error){console.error('Erreur lors du chargement du profil:',error);}finally{setLoading(false);}};const signUp=async(email,password,service)=>{const{data,error}=await supabase.auth.signUp({email,password});if(!error&&data.user){// Créer le profil manuellement après la création de l'utilisateur\nawait supabase.from('profiles').insert([{id:data.user.id,email:data.user.email,service:service,role:'user'}]);}return{data,error};};const signIn=async(email,password)=>{return await supabase.auth.signInWithPassword({email,password});};const signOut=async()=>{return await supabase.auth.signOut();};const value={user,profile,loading,signUp,signIn,signOut};return/*#__PURE__*/React.createElement(AuthContext.Provider,{value},children);};// Composant d'authentification\nconst AuthForm=()=>{const[isSignUp,setIsSignUp]=useState(false);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[service,setService]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const{signUp,signIn}=useAuth();const services=['IT','RH','Infirmerie','Médecin','Accueil et facturation','Direction','Laboratoire','Comptabilité','Cotation','Stock','Trésorerie et caisse'];const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{if(isSignUp){if(!service){setError('Veuillez sélectionner un service');return;}const{error}=await signUp(email,password,service);if(error)throw error;alert('Compte créé avec succès ! Vérifiez votre email.');}else{const{error}=await signIn(email,password);if(error)throw error;}}catch(error){setError(error.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8 p-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-3xl font-bold text-gray-900\",children:isSignUp?'Créer un compte':'Se connecter'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,value:email,onChange:e=>setEmail(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,value:password,onChange:e=>setPassword(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"})]}),isSignUp&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Service\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:service,onChange:e=>setService(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionnez un service\"}),services.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:loading,className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",children:loading?'Chargement...':isSignUp?'Créer le compte':'Se connecter'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsSignUp(!isSignUp),className:\"text-blue-600 hover:text-blue-500 text-sm\",children:isSignUp?'Déjà un compte ? Se connecter':'Pas de compte ? S\\'inscrire'})})]})]})});};// Composant pour créer une demande\nconst CreateRequest=_ref3=>{let{onClose,onSuccess}=_ref3;const[type,setType]=useState('');const[category,setCategory]=useState('');const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[location,setLocation]=useState('');const[priority,setPriority]=useState('basse');const[serviceDemandeur,setServiceDemandeur]=useState('');const[loading,setLoading]=useState(false);const{profile}=useAuth();const incidentCategories=['Problème d\\'imprimante','Demande liée à Santymed','Problème de réseau','Demande liée à Q-Gabon','Problème de fiches de paillasses','Problème au niveau des automates','Problème Pack Office','Problème Call Center','Demande de maintenance d\\'ordinateur','Problème lié au téléphone de service','Demande de création de compte Gmail','Autre demande'];const orderCategories=['Commander un ordinateur','Commander un clavier','Commander une souris','Commander un cable USB pour imprimante','Commander une imprimante','Autre commande'];const services=['IT','RH','Infirmerie','Médecin','Accueil et facturation','Direction','Laboratoire','Comptabilité','Cotation','Stock','Trésorerie et caisse'];const handleSubmit=async()=>{if(!type||!title||!description||!location||!serviceDemandeur){alert('Veuillez remplir tous les champs obligatoires');return;}setLoading(true);try{const{error}=await supabase.from('requests').insert([{user_id:profile.id,type,title,description,location,priority,service_demandeur:serviceDemandeur}]);if(error)throw error;onSuccess();onClose();}catch(error){console.error('Erreur:',error);alert('Erreur lors de la création de la demande');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Nouvelle demande\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Type de demande\"}),/*#__PURE__*/_jsxs(\"select\",{value:type,onChange:e=>{setType(e.target.value);setCategory('');},className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionnez un type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"incident\",children:\"Incident\"}),/*#__PURE__*/_jsx(\"option\",{value:\"order\",children:\"Commande\"})]})]}),type&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Cat\\xE9gorie\"}),/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:e=>setCategory(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionnez une cat\\xE9gorie\"}),(type==='incident'?incidentCategories:orderCategories).map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat,children:cat},cat))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Titre de la demande\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Description d\\xE9taill\\xE9e\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:4,value:description,onChange:e=>setDescription(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Localisation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:location,onChange:e=>setLocation(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Priorit\\xE9\"}),/*#__PURE__*/_jsxs(\"select\",{value:priority,onChange:e=>setPriority(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"basse\",children:\"Basse\"}),/*#__PURE__*/_jsx(\"option\",{value:\"moyenne\",children:\"Moyenne\"}),/*#__PURE__*/_jsx(\"option\",{value:\"urgente\",children:\"Urgente\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Service demandeur\"}),/*#__PURE__*/_jsxs(\"select\",{value:serviceDemandeur,onChange:e=>setServiceDemandeur(e.target.value),className:\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionnez un service\"}),services.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:loading,className:\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50\",children:loading?'Création...':'Créer la demande'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"flex-1 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700\",children:\"Annuler\"})]})]})]})});};// Composant pour afficher les demandes\nconst RequestsList=()=>{const[requests,setRequests]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState('all');const{profile}=useAuth();const isITOrAdmin=(profile===null||profile===void 0?void 0:profile.role)==='it_member'||(profile===null||profile===void 0?void 0:profile.role)==='admin';useEffect(()=>{fetchRequests();},[filter,profile]);const fetchRequests=async()=>{if(!profile)return;setLoading(true);try{let query=supabase.from('requests').select(\"\\n        *,\\n        profiles!requests_user_id_fkey(email, service),\\n        assigned_profile:profiles!requests_assigned_to_fkey(email, service)\\n      \").order('created_at',{ascending:false});// Filtrage selon le rôle\nif(!isITOrAdmin){query=query.eq('user_id',profile.id);}else if(filter==='assigned'){query=query.eq('assigned_to',profile.id);}else if(filter==='unassigned'){query=query.is('assigned_to',null);}const{data,error}=await query;if(error)throw error;setRequests(data||[]);}catch(error){console.error('Erreur:',error);}finally{setLoading(false);}};const takeRequest=async requestId=>{try{const{data,error}=await supabase.rpc('assign_request_to_self',{request_id:requestId});if(error)throw error;if(data){fetchRequests();alert('Demande prise en charge avec succès !');}else{alert('Impossible de prendre cette demande');}}catch(error){console.error('Erreur:',error);alert('Erreur lors de la prise en charge');}};const closeRequest=async requestId=>{try{const{error}=await supabase.from('requests').update({status:'termine',closed_at:new Date().toISOString()}).eq('id',requestId);if(error)throw error;fetchRequests();alert('Demande clôturée avec succès !');}catch(error){console.error('Erreur:',error);alert('Erreur lors de la clôture');}};const getStatusIcon=status=>{switch(status){case'ouvert':return/*#__PURE__*/React.createElement(AlertCircle,{className:\"w-5 h-5 text-red-500\"});case'en_cours':return/*#__PURE__*/React.createElement(Clock,{className:\"w-5 h-5 text-yellow-500\"});case'termine':return/*#__PURE__*/React.createElement(CheckCircle,{className:\"w-5 h-5 text-green-500\"});default:return/*#__PURE__*/React.createElement(AlertCircle,{className:\"w-5 h-5 text-gray-500\"});}};const getPriorityColor=priority=>{switch(priority){case'urgente':return'text-red-600 bg-red-100';case'moyenne':return'text-yellow-600 bg-yellow-100';case'basse':return'text-green-600 bg-green-100';default:return'text-gray-600 bg-gray-100';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:\"Chargement...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[isITOrAdmin&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('all'),className:\"px-4 py-2 rounded-md \".concat(filter==='all'?'bg-blue-600 text-white':'bg-gray-200'),children:\"Toutes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('unassigned'),className:\"px-4 py-2 rounded-md \".concat(filter==='unassigned'?'bg-blue-600 text-white':'bg-gray-200'),children:\"Non assign\\xE9es\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('assigned'),className:\"px-4 py-2 rounded-md \".concat(filter==='assigned'?'bg-blue-600 text-white':'bg-gray-200'),children:\"Mes demandes\"})]}),requests.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"Aucune demande trouv\\xE9e\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:requests.map(request=>{var _request$profiles;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border rounded-lg p-4 shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[getStatusIcon(request.status),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:request.title}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(getPriorityColor(request.priority)),children:request.priority.charAt(0).toUpperCase()+request.priority.slice(1)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 flex items-center gap-1\",children:[request.type==='incident'?/*#__PURE__*/React.createElement(AlertTriangle,{className:\"w-4 h-4\"}):/*#__PURE__*/React.createElement(ShoppingCart,{className:\"w-4 h-4\"}),request.type==='incident'?'Incident':'Commande']})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-2\",children:request.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500 space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCD \",request.location]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83C\\uDFE2 Service: \",request.service_demandeur]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDC64 Demandeur: \",(_request$profiles=request.profiles)===null||_request$profiles===void 0?void 0:_request$profiles.email]}),request.assigned_profile&&/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u26A1 Assign\\xE9 \\xE0: \",request.assigned_profile.email]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCC5 Cr\\xE9\\xE9 le: \",new Date(request.created_at).toLocaleString()]})]})]}),isITOrAdmin&&/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4 space-y-2\",children:[request.status==='ouvert'&&!request.assigned_to&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>takeRequest(request.id),className:\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700\",children:\"Prendre\"}),request.status==='en_cours'&&(request.assigned_to===profile.id||profile.role==='admin')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>closeRequest(request.id),className:\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700\",children:\"Cl\\xF4turer\"})]})]})},request.id);})})]});};// Composant principal Dashboard\nconst Dashboard=()=>{const[showCreateRequest,setShowCreateRequest]=useState(false);const[refreshTrigger,setRefreshTrigger]=useState(0);const{signOut,profile}=useAuth();const handleCreateSuccess=()=>{setRefreshTrigger(prev=>prev+1);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between h-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold text-gray-900\",children:\"Gestion d'incidents\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[profile===null||profile===void 0?void 0:profile.email,\" (\",profile===null||profile===void 0?void 0:profile.service,\")\",((profile===null||profile===void 0?void 0:profile.role)==='it_member'||(profile===null||profile===void 0?void 0:profile.role)==='admin')&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded\",children:(profile===null||profile===void 0?void 0:profile.role)==='admin'?'Admin':'IT'})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateRequest(true),className:\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Nouvelle demande\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:signOut,className:\"text-gray-600 hover:text-gray-900 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\"D\\xE9connexion\"]})]})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(RequestsList,{},refreshTrigger)}),showCreateRequest&&/*#__PURE__*/_jsx(CreateRequest,{onClose:()=>setShowCreateRequest(false),onSuccess:handleCreateSuccess})]});};// Composant principal App\nconst App=()=>{const{user,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-lg\",children:\"Chargement...\"})});}return user?/*#__PURE__*/React.createElement(Dashboard):/*#__PURE__*/React.createElement(AuthForm);};// Composant racine avec Provider\nconst AppWithProvider=()=>{return/*#__PURE__*/React.createElement(AuthProvider,null,/*#__PURE__*/React.createElement(App));};export default AppWithProvider;","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","createClient","LogOut","Plus","AlertCircle","ShoppingCart","CheckCircle","Clock","AlertTriangle","jsx","_jsx","jsxs","_jsxs","supabaseUrl","process","env","REACT_APP_SUPABASE_URL","supabaseKey","REACT_APP_SUPABASE_ANON_KEY","supabase","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","profile","setProfile","loading","setLoading","auth","getSession","then","_ref2","_session$user","data","session","fetchProfile","id","subscription","onAuthStateChange","event","_session$user2","unsubscribe","userId","error","from","select","eq","single","console","signUp","email","password","service","insert","role","signIn","signInWithPassword","signOut","value","createElement","Provider","AuthForm","isSignUp","setIsSignUp","setEmail","setPassword","setService","setError","services","handleSubmit","e","preventDefault","alert","message","className","type","required","onChange","target","map","s","onClick","disabled","CreateRequest","_ref3","onClose","onSuccess","setType","category","setCategory","title","setTitle","description","setDescription","location","setLocation","priority","setPriority","serviceDemandeur","setServiceDemandeur","incidentCategories","orderCategories","user_id","service_demandeur","cat","rows","RequestsList","requests","setRequests","filter","setFilter","isITOrAdmin","fetchRequests","query","order","ascending","is","takeRequest","requestId","rpc","request_id","closeRequest","update","status","closed_at","Date","toISOString","getStatusIcon","getPriorityColor","concat","length","request","_request$profiles","charAt","toUpperCase","slice","profiles","assigned_profile","created_at","toLocaleString","assigned_to","Dashboard","showCreateRequest","setShowCreateRequest","refreshTrigger","setRefreshTrigger","handleCreateSuccess","prev","App","AppWithProvider"],"sources":["C:/Users/Johan/incident-management/src/App.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\nimport { createClient } from '@supabase/supabase-js';\nimport { \n  LogOut, \n  Plus, \n  AlertCircle, \n  ShoppingCart, \n  CheckCircle,\n  Clock,\n  AlertTriangle\n} from 'lucide-react';\n\n// Configuration Supabase\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL || 'YOUR_SUPABASE_URL';\nconst supabaseKey = process.env.REACT_APP_SUPABASE_ANON_KEY || 'YOUR_SUPABASE_ANON_KEY';\nconst supabase = createClient(supabaseUrl, supabaseKey);\n\n// Context d'authentification\nconst AuthContext = createContext();\n\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\n// Provider d'authentification\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Récupérer la session initiale\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setUser(session?.user ?? null);\n      if (session?.user) {\n        fetchProfile(session.user.id);\n      } else {\n        setLoading(false);\n      }\n    });\n\n    // Écouter les changements d'authentification\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\n      setUser(session?.user ?? null);\n      if (session?.user) {\n        await fetchProfile(session.user.id);\n      } else {\n        setProfile(null);\n        setLoading(false);\n      }\n    });\n\n    return () => subscription?.unsubscribe();\n  }, []);\n\n  const fetchProfile = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      if (error) throw error;\n      setProfile(data);\n    } catch (error) {\n      console.error('Erreur lors du chargement du profil:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const signUp = async (email, password, service) => {\n  const { data, error } = await supabase.auth.signUp({ email, password });\n  \n  if (!error && data.user) {\n    // Créer le profil manuellement après la création de l'utilisateur\n    await supabase\n      .from('profiles')\n      .insert([{\n        id: data.user.id,\n        email: data.user.email,\n        service: service,\n        role: 'user'\n      }]);\n  }\n  \n  return { data, error };\n};\n\n  const signIn = async (email, password) => {\n    return await supabase.auth.signInWithPassword({ email, password });\n  };\n\n  const signOut = async () => {\n    return await supabase.auth.signOut();\n  };\n\n  const value = {\n    user,\n    profile,\n    loading,\n    signUp,\n    signIn,\n    signOut\n  };\n\n  return React.createElement(AuthContext.Provider, { value }, children);\n};\n\n// Composant d'authentification\nconst AuthForm = () => {\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [service, setService] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const { signUp, signIn } = useAuth();\n\n  const services = [\n    'IT', 'RH', 'Infirmerie', 'Médecin', 'Accueil et facturation',\n    'Direction', 'Laboratoire', 'Comptabilité', 'Cotation', 'Stock', 'Trésorerie et caisse'\n  ];\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      if (isSignUp) {\n        if (!service) {\n          setError('Veuillez sélectionner un service');\n          return;\n        }\n        const { error } = await signUp(email, password, service);\n        if (error) throw error;\n        alert('Compte créé avec succès ! Vérifiez votre email.');\n      } else {\n        const { error } = await signIn(email, password);\n        if (error) throw error;\n      }\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <div className=\"max-w-md w-full space-y-8 p-8\">\n        <div className=\"text-center\">\n          <h2 className=\"mt-6 text-3xl font-bold text-gray-900\">\n            {isSignUp ? 'Créer un compte' : 'Se connecter'}\n          </h2>\n        </div>\n        <div className=\"mt-8 space-y-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Email</label>\n            <input\n              type=\"email\"\n              required\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Mot de passe</label>\n            <input\n              type=\"password\"\n              required\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            />\n          </div>\n\n          {isSignUp && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Service</label>\n              <select\n                required\n                value={service}\n                onChange={(e) => setService(e.target.value)}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n              >\n                <option value=\"\">Sélectionnez un service</option>\n                {services.map((s) => (\n                  <option key={s} value={s}>{s}</option>\n                ))}\n              </select>\n            </div>\n          )}\n\n          {error && (\n            <div className=\"text-red-600 text-sm\">{error}</div>\n          )}\n\n          <button\n            onClick={handleSubmit}\n            disabled={loading}\n            className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n          >\n            {loading ? 'Chargement...' : (isSignUp ? 'Créer le compte' : 'Se connecter')}\n          </button>\n\n          <div className=\"text-center\">\n            <button\n              onClick={() => setIsSignUp(!isSignUp)}\n              className=\"text-blue-600 hover:text-blue-500 text-sm\"\n            >\n              {isSignUp ? 'Déjà un compte ? Se connecter' : 'Pas de compte ? S\\'inscrire'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Composant pour créer une demande\nconst CreateRequest = ({ onClose, onSuccess }) => {\n  const [type, setType] = useState('');\n  const [category, setCategory] = useState('');\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [location, setLocation] = useState('');\n  const [priority, setPriority] = useState('basse');\n  const [serviceDemandeur, setServiceDemandeur] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { profile } = useAuth();\n\n  const incidentCategories = [\n    'Problème d\\'imprimante', 'Demande liée à Santymed', 'Problème de réseau',\n    'Demande liée à Q-Gabon', 'Problème de fiches de paillasses', 'Problème au niveau des automates',\n    'Problème Pack Office', 'Problème Call Center', 'Demande de maintenance d\\'ordinateur',\n    'Problème lié au téléphone de service', 'Demande de création de compte Gmail', 'Autre demande'\n  ];\n\n  const orderCategories = [\n    'Commander un ordinateur', 'Commander un clavier', 'Commander une souris',\n    'Commander un cable USB pour imprimante', 'Commander une imprimante', 'Autre commande'\n  ];\n\n  const services = [\n    'IT', 'RH', 'Infirmerie', 'Médecin', 'Accueil et facturation',\n    'Direction', 'Laboratoire', 'Comptabilité', 'Cotation', 'Stock', 'Trésorerie et caisse'\n  ];\n\n  const handleSubmit = async () => {\n    if (!type || !title || !description || !location || !serviceDemandeur) {\n      alert('Veuillez remplir tous les champs obligatoires');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const { error } = await supabase\n        .from('requests')\n        .insert([{\n          user_id: profile.id,\n          type,\n          title,\n          description,\n          location,\n          priority,\n          service_demandeur: serviceDemandeur\n        }]);\n\n      if (error) throw error;\n      \n      onSuccess();\n      onClose();\n    } catch (error) {\n      console.error('Erreur:', error);\n      alert('Erreur lors de la création de la demande');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto p-6\">\n        <h2 className=\"text-2xl font-bold mb-4\">Nouvelle demande</h2>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Type de demande</label>\n            <select\n              value={type}\n              onChange={(e) => {\n                setType(e.target.value);\n                setCategory('');\n              }}\n              className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            >\n              <option value=\"\">Sélectionnez un type</option>\n              <option value=\"incident\">Incident</option>\n              <option value=\"order\">Commande</option>\n            </select>\n          </div>\n\n          {type && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700\">Catégorie</label>\n              <select\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n              >\n                <option value=\"\">Sélectionnez une catégorie</option>\n                {(type === 'incident' ? incidentCategories : orderCategories).map((cat) => (\n                  <option key={cat} value={cat}>{cat}</option>\n                ))}\n              </select>\n            </div>\n          )}\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Titre de la demande</label>\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Description détaillée</label>\n            <textarea\n              rows={4}\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Localisation</label>\n            <input\n              type=\"text\"\n              value={location}\n              onChange={(e) => setLocation(e.target.value)}\n              className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Priorité</label>\n            <select\n              value={priority}\n              onChange={(e) => setPriority(e.target.value)}\n              className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            >\n              <option value=\"basse\">Basse</option>\n              <option value=\"moyenne\">Moyenne</option>\n              <option value=\"urgente\">Urgente</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700\">Service demandeur</label>\n            <select\n              value={serviceDemandeur}\n              onChange={(e) => setServiceDemandeur(e.target.value)}\n              className=\"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            >\n              <option value=\"\">Sélectionnez un service</option>\n              {services.map((s) => (\n                <option key={s} value={s}>{s}</option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button\n              onClick={handleSubmit}\n              disabled={loading}\n              className=\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50\"\n            >\n              {loading ? 'Création...' : 'Créer la demande'}\n            </button>\n            <button\n              onClick={onClose}\n              className=\"flex-1 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700\"\n            >\n              Annuler\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Composant pour afficher les demandes\nconst RequestsList = () => {\n  const [requests, setRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const { profile } = useAuth();\n\n  const isITOrAdmin = profile?.role === 'it_member' || profile?.role === 'admin';\n\n  useEffect(() => {\n    fetchRequests();\n  }, [filter, profile]);\n\n  const fetchRequests = async () => {\n    if (!profile) return;\n    \n    setLoading(true);\n    try {\n      let query = supabase.from('requests').select(`\n        *,\n        profiles!requests_user_id_fkey(email, service),\n        assigned_profile:profiles!requests_assigned_to_fkey(email, service)\n      `).order('created_at', { ascending: false });\n\n      // Filtrage selon le rôle\n      if (!isITOrAdmin) {\n        query = query.eq('user_id', profile.id);\n      } else if (filter === 'assigned') {\n        query = query.eq('assigned_to', profile.id);\n      } else if (filter === 'unassigned') {\n        query = query.is('assigned_to', null);\n      }\n\n      const { data, error } = await query;\n      \n      if (error) throw error;\n      setRequests(data || []);\n    } catch (error) {\n      console.error('Erreur:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const takeRequest = async (requestId) => {\n    try {\n      const { data, error } = await supabase.rpc('assign_request_to_self', {\n        request_id: requestId\n      });\n\n      if (error) throw error;\n      \n      if (data) {\n        fetchRequests();\n        alert('Demande prise en charge avec succès !');\n      } else {\n        alert('Impossible de prendre cette demande');\n      }\n    } catch (error) {\n      console.error('Erreur:', error);\n      alert('Erreur lors de la prise en charge');\n    }\n  };\n\n  const closeRequest = async (requestId) => {\n    try {\n      const { error } = await supabase\n        .from('requests')\n        .update({ \n          status: 'termine',\n          closed_at: new Date().toISOString()\n        })\n        .eq('id', requestId);\n\n      if (error) throw error;\n      \n      fetchRequests();\n      alert('Demande clôturée avec succès !');\n    } catch (error) {\n      console.error('Erreur:', error);\n      alert('Erreur lors de la clôture');\n    }\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'ouvert':\n        return React.createElement(AlertCircle, { className: \"w-5 h-5 text-red-500\" });\n      case 'en_cours':\n        return React.createElement(Clock, { className: \"w-5 h-5 text-yellow-500\" });\n      case 'termine':\n        return React.createElement(CheckCircle, { className: \"w-5 h-5 text-green-500\" });\n      default:\n        return React.createElement(AlertCircle, { className: \"w-5 h-5 text-gray-500\" });\n    }\n  };\n\n  const getPriorityColor = (priority) => {\n    switch (priority) {\n      case 'urgente':\n        return 'text-red-600 bg-red-100';\n      case 'moyenne':\n        return 'text-yellow-600 bg-yellow-100';\n      case 'basse':\n        return 'text-green-600 bg-green-100';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-8\">Chargement...</div>;\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {isITOrAdmin && (\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setFilter('all')}\n            className={`px-4 py-2 rounded-md ${filter === 'all' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}\n          >\n            Toutes\n          </button>\n          <button\n            onClick={() => setFilter('unassigned')}\n            className={`px-4 py-2 rounded-md ${filter === 'unassigned' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}\n          >\n            Non assignées\n          </button>\n          <button\n            onClick={() => setFilter('assigned')}\n            className={`px-4 py-2 rounded-md ${filter === 'assigned' ? 'bg-blue-600 text-white' : 'bg-gray-200'}`}\n          >\n            Mes demandes\n          </button>\n        </div>\n      )}\n\n      {requests.length === 0 ? (\n        <div className=\"text-center py-8 text-gray-500\">Aucune demande trouvée</div>\n      ) : (\n        <div className=\"space-y-4\">\n          {requests.map((request) => (\n            <div key={request.id} className=\"bg-white border rounded-lg p-4 shadow\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    {getStatusIcon(request.status)}\n                    <h3 className=\"text-lg font-semibold\">{request.title}</h3>\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(request.priority)}`}>\n                      {request.priority.charAt(0).toUpperCase() + request.priority.slice(1)}\n                    </span>\n                    <span className=\"text-xs text-gray-500 flex items-center gap-1\">\n                      {request.type === 'incident' ? \n                        React.createElement(AlertTriangle, { className: \"w-4 h-4\" }) : \n                        React.createElement(ShoppingCart, { className: \"w-4 h-4\" })\n                      }\n                      {request.type === 'incident' ? 'Incident' : 'Commande'}\n                    </span>\n                  </div>\n                  \n                  <p className=\"text-gray-600 mb-2\">{request.description}</p>\n                  \n                  <div className=\"text-sm text-gray-500 space-y-1\">\n                    <div>📍 {request.location}</div>\n                    <div>🏢 Service: {request.service_demandeur}</div>\n                    <div>👤 Demandeur: {request.profiles?.email}</div>\n                    {request.assigned_profile && (\n                      <div>⚡ Assigné à: {request.assigned_profile.email}</div>\n                    )}\n                    <div>📅 Créé le: {new Date(request.created_at).toLocaleString()}</div>\n                  </div>\n                </div>\n                \n                {isITOrAdmin && (\n                  <div className=\"ml-4 space-y-2\">\n                    {request.status === 'ouvert' && !request.assigned_to && (\n                      <button\n                        onClick={() => takeRequest(request.id)}\n                        className=\"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700\"\n                      >\n                        Prendre\n                      </button>\n                    )}\n                    {request.status === 'en_cours' && (request.assigned_to === profile.id || profile.role === 'admin') && (\n                      <button\n                        onClick={() => closeRequest(request.id)}\n                        className=\"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700\"\n                      >\n                        Clôturer\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Composant principal Dashboard\nconst Dashboard = () => {\n  const [showCreateRequest, setShowCreateRequest] = useState(false);\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  const { signOut, profile } = useAuth();\n\n  const handleCreateSuccess = () => {\n    setRefreshTrigger(prev => prev + 1);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <nav className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-xl font-semibold text-gray-900\">Gestion d'incidents</h1>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <span className=\"text-sm text-gray-600\">\n                {profile?.email} ({profile?.service})\n                {(profile?.role === 'it_member' || profile?.role === 'admin') && \n                  <span className=\"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded\">\n                    {profile?.role === 'admin' ? 'Admin' : 'IT'}\n                  </span>\n                }\n              </span>\n              <button\n                onClick={() => setShowCreateRequest(true)}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                Nouvelle demande\n              </button>\n              <button\n                onClick={signOut}\n                className=\"text-gray-600 hover:text-gray-900 flex items-center gap-2\"\n              >\n                <LogOut className=\"w-4 h-4\" />\n                Déconnexion\n              </button>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      <main className=\"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8\">\n        <RequestsList key={refreshTrigger} />\n      </main>\n\n      {showCreateRequest && (\n        <CreateRequest\n          onClose={() => setShowCreateRequest(false)}\n          onSuccess={handleCreateSuccess}\n        />\n      )}\n    </div>\n  );\n};\n\n// Composant principal App\nconst App = () => {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-lg\">Chargement...</div>\n      </div>\n    );\n  }\n\n  return user ? React.createElement(Dashboard) : React.createElement(AuthForm);\n};\n\n// Composant racine avec Provider\nconst AppWithProvider = () => {\n  return React.createElement(AuthProvider, null, React.createElement(App));\n};\n\nexport default AppWithProvider;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}